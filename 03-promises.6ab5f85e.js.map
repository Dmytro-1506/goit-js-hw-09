{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAaC,SAASC,cAAc,eACpCC,EAAYF,SAASC,cAAc,cACnCE,EAASH,SAASC,cAAc,gBAChCG,EAAOJ,SAASC,cAAc,SAEpC,IAAII,EAAc,EACdC,EAAW,EAEXC,EAAgB,EACpBR,EAAWS,iBAAiB,SAAS,KACnCD,EAAgBE,OAAOV,EAAWW,OAClCJ,EAAWG,OAAOV,EAAWW,MAAM,IAGrC,IAAIC,EAAe,EACnBT,EAAUM,iBAAiB,SAAS,KAClCG,EAAeF,OAAOP,EAAUQ,MAAM,IAGxC,IAAIE,EAAY,EAKhB,SAASC,EAAQC,EAAUC,GACrBA,GAAY,IAmBlB,SAAuBC,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GAYtC,OAVgB,IAAIC,SAAQ,CAACC,EAASC,KACpCC,YAAW,KACLN,EACFI,EAAQG,EAAA5B,GAAS6B,OAAOC,QAAQ,uBAAqBX,QAAiBC,QAEpEM,EAAKE,EAAA5B,GAAS6B,OAAOE,QAAQ,sBAAoBZ,QAAeC,OAAW,GAE9EN,EAAa,G,CA5BhBkB,CAAcxB,EAAaC,GAAUwB,MAAK,KACpClB,GAAa,GACfC,EAAQF,EAAcC,EAAU,IAInCmB,OAAM,KACDnB,GAAa,GACfC,EAAQF,EAAcC,EAAU,IAIpCN,GAAYQ,EACZF,GAAa,EACbP,GAAe,E,CApBnBF,EAAOK,iBAAiB,SAAS,KAC/BI,EAAYH,OAAON,EAAOO,MAAM,IAuClCN,EAAKI,iBAAiB,UAAWwB,IAC7BA,EAAEC,iBAEJT,YAAW,KACTX,EAAQF,EAAcC,EAAU,GAC7BL,EAAc","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst firstDelay = document.querySelector('.prom-delay');\nconst delayStep = document.querySelector('.prom-step');\nconst amount = document.querySelector('.prom-amount');\nconst form = document.querySelector('.form');\n\nlet positionNum = 1;\nlet delayNum = 0;\n\nlet firstDelayNum = 0;\nfirstDelay.addEventListener('input', () => {\n  firstDelayNum = Number(firstDelay.value);\n  delayNum = Number(firstDelay.value);\n})\n\nlet delayStepNum = 0;\ndelayStep.addEventListener('input', () => {\n  delayStepNum = Number(delayStep.value);\n})\n\nlet amountNum = 0;\namount.addEventListener('input', () => {\n  amountNum = Number(amount.value);\n})\n\nfunction counter(interval, quantity) {\n  if (quantity >= 1) {\n    createPromise(positionNum, delayNum).then(() => {\n      if (amountNum >= 1) {\n        counter(delayStepNum, amountNum);\n      }\n    }\n      )\n    .catch(() => {\n      if (amountNum >= 1) {\n        counter(delayStepNum, amountNum);\n      }\n    }\n    );\n    delayNum += interval;\n    amountNum -= 1;\n    positionNum += 1;\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.5;\n\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve(Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`));\n      } else {\n        reject(Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`));\n      }\n    }, delayStepNum);\n  });\n\n  return promise;\n}\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n  setTimeout(() => {\n    counter(delayStepNum, amountNum);\n    }, firstDelayNum);\n    \n  });"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$firstDelay","document","querySelector","$47d4ff9957288465$var$delayStep","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$form","$47d4ff9957288465$var$positionNum","$47d4ff9957288465$var$delayNum","$47d4ff9957288465$var$firstDelayNum","addEventListener","Number","value","$47d4ff9957288465$var$delayStepNum","$47d4ff9957288465$var$amountNum","$47d4ff9957288465$var$counter","interval","quantity","position","delay","shouldResolve","Math","random","Promise","resolve","reject","setTimeout","$parcel$interopDefault","Notify","success","failure","$47d4ff9957288465$var$createPromise","then","catch","e","preventDefault"],"version":3,"file":"03-promises.6ab5f85e.js.map"}